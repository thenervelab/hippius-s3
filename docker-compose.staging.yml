services:
  base:
    image: hippius-s3-base:latest
    profiles:
      - build-base
    build:
      context: .
      dockerfile: Dockerfile.base

  api:
    environment:
      - HIPPIUS_ENVIRONMENT=staging
      - DEBUG=false
      - UVICORN_LOG_LEVEL=info

  db:
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_DB=hippius

volumes:
  postgres_data:
