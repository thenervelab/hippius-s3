tempo:
  # Disable memory ballast â€” Go 1.19+ uses GOMEMLIMIT instead
  memBallastSizeMbs: 0
  receivers:
    otlp:
      protocols:
        grpc:
          endpoint: 0.0.0.0:4317
  storage:
    trace:
      backend: local
      local:
        path: /var/tempo/blocks
      wal:
        path: /var/tempo/wal
  metricsGenerator:
    enabled: true
    remoteWriteUrl: "http://prometheus-server.monitoring.svc.cluster.local:80/api/v1/write"
  retention: 72h
  overrides:
    defaults:
      metrics_generator:
        processors: [service-graphs, span-metrics]
  extraEnv:
    - name: GOMEMLIMIT
      value: "1600MiB"
  resources:
    requests:
      cpu: 100m
      memory: 512Mi
    limits:
      cpu: "1"
      memory: 2Gi

persistence:
  enabled: true
  size: 30Gi
