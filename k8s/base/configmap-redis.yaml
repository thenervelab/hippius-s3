apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-config
  namespace: hippius-s3-staging
data:
  redis.conf: |
    bind 0.0.0.0
    port 6379
    timeout 0
    tcp-keepalive 300
    maxmemory 25gb
    maxmemory-policy allkeys-lru
    maxmemory-samples 10
    save ""
    appendonly no
    hz 100
    hash-max-ziplist-entries 512
    hash-max-ziplist-value 64
    list-max-ziplist-size -2
    set-max-intset-entries 512
    zset-max-ziplist-entries 128
    zset-max-ziplist-value 64
    tcp-backlog 2048
    databases 1
    lazyfree-lazy-eviction yes
    lazyfree-lazy-expire yes
    lazyfree-lazy-server-del yes
    activedefrag yes
    active-defrag-ignore-bytes 100mb
    active-defrag-threshold-lower 10
    active-defrag-threshold-upper 100
    active-defrag-cycle-min 1
    active-defrag-cycle-max 25
    maxclients 10000
    client-output-buffer-limit normal 0 0 0
    client-output-buffer-limit slave 256mb 64mb 60
    client-output-buffer-limit pubsub 32mb 8mb 60
    protected-mode no
    loglevel notice
    syslog-enabled no
    rename-command FLUSHDB ""
    rename-command FLUSHALL ""
    rename-command DEBUG ""
